{"remainingRequest":"/home/agou-ops/tmp/vue-ol-demo/node_modules/babel-loader/lib/index.js!/home/agou-ops/tmp/vue-ol-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/agou-ops/tmp/vue-ol-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/agou-ops/tmp/vue-ol-demo/src/components/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/agou-ops/tmp/vue-ol-demo/src/components/Map.vue","mtime":1619667343741},{"path":"/home/agou-ops/tmp/vue-ol-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agou-ops/tmp/vue-ol-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/agou-ops/tmp/vue-ol-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agou-ops/tmp/vue-ol-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICJvbC9vbC5jc3MiOwppbXBvcnQgTWFwIGZyb20gIm9sL01hcCI7CmltcG9ydCBWaWV3IGZyb20gIm9sL1ZpZXciOwppbXBvcnQgVGlsZUxheWVyIGZyb20gIm9sL2xheWVyL1RpbGUiOwppbXBvcnQgWFlaIGZyb20gIm9sL3NvdXJjZS9YWVoiOwppbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0Q29udHJvbHMsIE92ZXJ2aWV3TWFwIH0gZnJvbSAib2wvY29udHJvbCI7CmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gIm9sL3Byb2oiOwppbXBvcnQgeyB2ZWN0b3IsIGFkZEludGVyYWN0aW9uLCBjbGVhckRyYXdPbk1hcCB9IGZyb20gIi4uL3NoYXJlZC90b29scy9tZWFzdXJlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNYXAiLAogIHByb3BzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWFwSGVpZ2h0OiA1MDAsCiAgICAgIG1hcDogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMubWFwSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gNjA7IC8vIOWIneWni+WMlue7mOWItuW3peWFtwoKICAgIHRoaXMuJG9uKCJpbml0RHJhdyIsIGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgIGFkZEludGVyYWN0aW9uKF90aGlzLm1hcCwgdHlwZSk7CiAgICB9KTsKICAgIHRoaXMuJG9uKCJjbGVhbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgY2xlYXJEcmF3T25NYXAoX3RoaXMubWFwKTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBzb3VyY2UgPSBuZXcgWFlaKHsKICAgICAgdXJsOiAiaHR0cHM6Ly97YS1jfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZyIKICAgIH0pOwogICAgdmFyIG92ZXJ2aWV3TWFwQ29udHJvbCA9IG5ldyBPdmVydmlld01hcCh7CiAgICAgIGxheWVyczogW25ldyBUaWxlTGF5ZXIoewogICAgICAgIHNvdXJjZTogc291cmNlCiAgICAgIH0pXQogICAgfSk7CiAgICB2YXIgbWFwID0gbmV3IE1hcCh7CiAgICAgIHRhcmdldDogIm1hcCIsCiAgICAgIGxheWVyczogW25ldyBUaWxlTGF5ZXIoewogICAgICAgIHNvdXJjZTogc291cmNlCiAgICAgIH0pLCB2ZWN0b3JdLAogICAgICBjb250cm9sczogZGVmYXVsdENvbnRyb2xzKCkuZXh0ZW5kKFtvdmVydmlld01hcENvbnRyb2xdKSwKICAgICAgdmlldzogbmV3IFZpZXcoewogICAgICAgIGNlbnRlcjogWzUwMDAwMCwgNjAwMDAwMF0sCiAgICAgICAgem9vbTogNwogICAgICB9KQogICAgfSk7CiAgICB3aW5kb3cubWFwID0gbWFwOwogICAgdGhpcy5tYXAgPSBtYXA7IC8vIOagueaNrum8oOagh+S6i+S7tuiOt+WPluW9k+WJjeeahOe7j+e6rOW6pgoKICAgIG1hcC5vbigiY2xpY2siLCBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHZhciBsb25sYXQgPSB0cmFuc2Zvcm0oJGV2ZW50LmNvb3JkaW5hdGUsICJFUFNHOjM4NTciLCAiRVBTRzo0MzI2Iik7IC8vICAgY29uc29sZS5sb2cobG9ubGF0KTsKCiAgICAgIF90aGlzMi4kZW1pdCgibWFwLWNsaWNrIiwgIiIuY29uY2F0KGxvbmxhdFswXS50b0ZpeGVkKDYpLCAiLCIpLmNvbmNhdChsb25sYXRbMV0udG9GaXhlZCg2KSkpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;AAOA,OAAA,WAAA;AACA,OAAA,GAAA,MAAA,QAAA;AACA,OAAA,IAAA,MAAA,SAAA;AACA,OAAA,SAAA,MAAA,eAAA;AACA,OAAA,GAAA,MAAA,eAAA;AACA,SAAA,QAAA,IAAA,eAAA,EAAA,WAAA,QAAA,YAAA;AACA,SAAA,SAAA,QAAA,SAAA;AAEA,SACA,MADA,EAEA,cAFA,EAGA,cAHA,QAIA,yBAJA;AAMA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,KAAA,EAAA,EAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,GADA;AAEA,MAAA,GAAA,EAAA;AAFA,KAAA;AAIA,GARA;AASA,EAAA,OAAA,EAAA,mBAAA;AAAA;;AACA,SAAA,SAAA,GAAA,MAAA,CAAA,WAAA,GAAA,EAAA,CADA,CAEA;;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,UAAA,IAAA,EAAA;AACA,MAAA,cAAA,CAAA,KAAA,CAAA,GAAA,EAAA,IAAA,CAAA;AACA,KAFA;AAGA,SAAA,GAAA,CAAA,OAAA,EAAA,YAAA;AACA,MAAA,cAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,KAFA;AAGA,GAlBA;AAmBA,EAAA,OAAA,EAAA,mBAAA;AAAA;;AACA,QAAA,MAAA,GAAA,IAAA,GAAA,CAAA;AACA,MAAA,GAAA,EAAA;AADA,KAAA,CAAA;AAGA,QAAA,kBAAA,GAAA,IAAA,WAAA,CAAA;AACA,MAAA,MAAA,EAAA,CACA,IAAA,SAAA,CAAA;AACA,QAAA,MAAA,EAAA;AADA,OAAA,CADA;AADA,KAAA,CAAA;AAQA,QAAA,GAAA,GAAA,IAAA,GAAA,CAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,CACA,IAAA,SAAA,CAAA;AACA,QAAA,MAAA,EAAA;AADA,OAAA,CADA,EAIA,MAJA,CAFA;AAQA,MAAA,QAAA,EAAA,eAAA,GAAA,MAAA,CAAA,CAAA,kBAAA,CAAA,CARA;AASA,MAAA,IAAA,EAAA,IAAA,IAAA,CAAA;AACA,QAAA,MAAA,EAAA,CAAA,MAAA,EAAA,OAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AATA,KAAA,CAAA;AAcA,IAAA,MAAA,CAAA,GAAA,GAAA,GAAA;AACA,SAAA,GAAA,GAAA,GAAA,CA3BA,CA4BA;;AACA,IAAA,GAAA,CAAA,EAAA,CAAA,OAAA,EAAA,UAAA,MAAA,EAAA;AACA,UAAA,MAAA,GAAA,SAAA,CAAA,MAAA,CAAA,UAAA,EAAA,WAAA,EAAA,WAAA,CAAA,CADA,CAEA;;AACA,MAAA,MAAA,CAAA,KAAA,CACA,WADA,YAEA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAFA,cAEA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAFA;AAIA,KAPA;AAQA;AAxDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div id=\"map\" :style=\"{ height: mapHeight + 'px' }\"></div>\n  </div>\n</template>\n\n<script>\nimport \"ol/ol.css\";\nimport Map from \"ol/Map\";\nimport View from \"ol/View\";\nimport TileLayer from \"ol/layer/Tile\";\nimport XYZ from \"ol/source/XYZ\";\nimport { defaults as defaultControls, OverviewMap } from \"ol/control\";\nimport { transform } from \"ol/proj\";\n\nimport {\n  vector,\n  addInteraction,\n  clearDrawOnMap\n} from \"../shared/tools/measure\";\n\nexport default {\n  name: \"Map\",\n  props: {},\n  data: function() {\n    return {\n      mapHeight: 500,\n      map: null\n    };\n  },\n  created: function() {\n    this.mapHeight = window.innerHeight - 60;\n    // 初始化绘制工具\n    this.$on(\"initDraw\", type => {\n      addInteraction(this.map, type);\n    });\n    this.$on(\"clean\", () => {\n      clearDrawOnMap(this.map);\n    });\n  },\n  mounted: function() {\n    const source = new XYZ({\n      url: \"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    });\n    const overviewMapControl = new OverviewMap({\n      layers: [\n        new TileLayer({\n          source\n        })\n      ]\n    });\n\n    const map = new Map({\n      target: \"map\",\n      layers: [\n        new TileLayer({\n          source\n        }),\n        vector\n      ],\n      controls: defaultControls().extend([overviewMapControl]),\n      view: new View({\n        center: [500000, 6000000],\n        zoom: 7\n      })\n    });\n    window.map = map;\n    this.map = map;\n    // 根据鼠标事件获取当前的经纬度\n    map.on(\"click\", $event => {\n      const lonlat = transform($event.coordinate, \"EPSG:3857\", \"EPSG:4326\");\n      //   console.log(lonlat);\n      this.$emit(\n        \"map-click\",\n        `${lonlat[0].toFixed(6)},${lonlat[1].toFixed(6)}`\n      );\n    });\n  }\n};\n</script>\n\n<style scoped>\n#map {\n  width: 100%;\n  height: 500px;\n}\n</style>"],"sourceRoot":"src/components"}]}